2/20/2008

VC++ 6.0 project files are removed.

[VM/HD146818P] support sqw and periodic interrupt
[VM/HD146818P] clear IRQF/PF/AF/UF in the reg $0c when it is read
[VM/I8237] fix the build error
[VM/I8237] reimplement based on uPD71071
[VM/UPD7220] fix the build error
[VM/UPD7220] modify hblank/vsync event
[VM/UPD765A] lost data event occurs soon if dma request is not accepted
[VM/Z80SIO] change uPD7201 fifo buffer size

[QC10] support EPSON QC-10/QX-10
[RX78/VDP] fix the crash problem on Windows CE


2/11/2008

The interrupt logics are largely modified and are now very close to the real circuits.

In the older versions:
	- Each device requests the interrupt, sends the vector and goes into the in-service status only in the case that CPU can accept the interrupt.
	- These requests are always accepted and executed just now.
	- When the interrupt acception status is changed by the opecodes for example EI/RETI/RETN, CPU notifies to each devices to let them request the pending interrupt.
	- Realize Z80 family daisy chain by the pseudo device Z80PIC to control the priorities and receive RETI opecode.

This is because let CPU not to monitor the int-line in every opecodes.
But it causes some problems for example:
	- Timing problems.
	- End of Interrupt command in Z80SIO/uPD7201.
	- Using Z80 family devices with 80x86 and PIC8259.

In this release:
	- Each device can request the interrupt any time.
	- CPU checks the int-line in every opecodes.
	- When CPU accepts the request, CPU sends the ack signal to the device and receive the vector.
	- The device goes into the in-service status when receive the ack signal.
	- Realize Z80 family daisy chain by IEI/OEI signals supported in Z80 family devices.
	- Z80 checks the wired-or of int-lines from Z80 family devices.

[VM/DEVICE] modify virtual functions for interrupts
[VM/I8259] support the new interrupt logic
[VM/I8259] fix the crash problem
[VM/UPD7201] support uPD7201 (combined to Z80SIO class)
[VM/X86] support the new interrupt logic
[VM/Z80] support the new interrupt logic
[VM/Z80CTC] support the new interrupt logic
[VM/Z80PIO] support the new interrupt logic
[VM/Z80SIO] support the new interrupt logic
[VM/Z80SIO] support the End of Interrupt command
[VM/Z80SIO] fix the status register #0 (interrupt pending bit)
[VM/Z80SIO] fix the status register #2 (vector)
[VM/Z80PIC] removed

[MZ2500/CRTC] notify vsync signal by not edge but level
[MZ2500/INTERRUPT] support the new interrupt logic
[MZ2500/INTERRUPT] pending the interrupt request from vsync and timer
[MZ2500/INTERRUPT] remove the patches added in 2/11/2007


1/5/2008

[VM/BEEP] fix the crash problem when the frequency is constant
[VM/BEEP] support the interface to change the frequency constant

[X07/IO] support user defined keys
[X07/IO] support break key
[X07/IO] support line/circle commands
[X07/IO] support beep command
[X07/IO] support data recorder


12/31/2007

[VM/FIFO] support read_not_remove()
[VM/NSC800] fix NSC800

[X07] support CANON X-07


9/14/2007

[MZ2800/CRTC] fix read-modify-write registers


8/24/2007

[EMU/WIN32] check the status of both left and right ALT/CTRL/SHIFT keys

[MZ2800] ignore A15 of I/O port addr
[MZ2800/CTRL] support 65536colors graphic screen
[MZ2800/KEYBOARD] change keymap to newply support some keys
[MZ2800/MEMORY] fix the problem that symbol does not work on BASIC-M25


8/22/2007

[VM/RP5C15] fix the initial 12H/24H setting

[MZ2500/CRTC] optimize the screen renderer
[MZ2800/CRTC] support the 16/4096colors graphic screen
[MZ2800/CRTC] support the read modify write
[MZ2800/CRTC] support the hardware scroll
[MZ2800/CRTC] support the vram plane mask
[MZ2800/MEMORY] support the dictionary/kanji/pcg bank switch


8/19/2007

[VM/MB8877] fix the status for type4 command
[VM/UPD71071] support the base registers
[VM/X86] fix rep never to exit and re-fetch the opecode in the loop
[VM/X86] fix the modrm table

[MZ2800] add eVC4 project file
[MZ2800/CRTC] fix the test screen renderer
[MZ2800/CRTC] support 4096 color palette registers
[MZ2800/MEMORY] fix that ipl rom is initially mapped to $f0000-$fffff


8/16/2007

[VM/DEVICE] add the virtual functions for dma access
[VM/I8237] fix the typo
[VM/I8259] support the special fully nest mode
[VM/I8259] support the rotation of priorities
[VM/I8259] support the intrrupt request from Z80 family devices
[VM/IO8] support 16bit i/o adrress
[VM/MB8877] support the dma access
[VM/MB8877] support the irq and drq signals
[VM/RP5C15] support reading the values of banks #13/#14/#15
[VM/UPD71071] support uPD71071
[VM/X86] support 8086/V30/80286
[VM/YM2203] support the irq signal

[MZ2500] fix YM2203 PortB signal from RP-5C15
[MZ2800] support SHARP MZ-2800


7/23/2007

[VM/DATAREC] modify the frame skip condition (skip when the signal is changed)
[VM/TMS9918A] reimplement based on MAME 0.116
[VM/UPD7801] support the memory access wait

[PYUTA/MEMORY] modify the memory bank switch
[PYUTA/MEMORY] change the data bus from pull-down to pull-up
[SCV/MEMORY] support the memory access wait (now disabled)


7/16/2007

[VM/TMS9995] support TMS9995

[PYUTA] support TOMY PyuTa and PyuTa Jr.


2/11/2007

[COMMON] support auto key hitting from the clipboard
[COMMON] save and restore the window mode when the emulator is restarted
[VM/DEVICE] modify memory access wait
[VM/DEVICE] support i/o access wait
[VM/DISK] fix the crash problem when the invalid track number is set
[VM/HD46505] support HD46505
[VM/HD46505] fix the display/vsync/hsync signals timing
[VM/I8253] more precise signal timing in mode #2, #4 and #5
[VM/MB8877] support the access led status
[VM/PICM1BIT] support 1bit pcm
[VM/UPD765A] support the acces led status
[VM/YM2203] support the volume adjustment
[VM/Z80] modify memory access wait
[VM//Z80] support i/o access wait
[VM/Z80SIO] fix the recv and under-run interrupt flags
[VM/Z80SIO] fix the status affect vector
[VM/Z80SIO] cancel the interrupt request when read the recv buffer
[VM/Z80SIO] support the i/f to clear the recv buffer

[MULTI8/DISPLAY] remove HD46505 codes
[MULTI8/DISPLAY] draw the flopppy drive access led
[MZ2500] support 1bit pcm
[MZ2500] adjust fm/psg volume
[MZ2500] support i/o access wait
[MZ2500/CRTC] render screen with less cpu power
[MZ2500/CRTC] draw the floppy drive access led
[MZ2500/INTERRUPT] reimplement interrupt handler with the common Z80PIC class
[MZ2500/INTERRUPT] add the patch for GALAGA, LAYDOCK, THEXDER, MULTIPLAN, Super Shunbou, Wizardry and Ys3
[MZ2500/MEMORY] modify memory access wait
[MZ2500/MOUSE] clear Z80SIO recv buffer when send the mouse status
[PASOPIA] support OA-BASIC
[PASOPIA] support hsync signal
[PASOPIA/DISPLAY] remove HD46505 codes
[PASOPIA/MEMORY] fix the memory map $8000-$ffff
[PASOPIA7/DISPLAY] remove HD46505 codes
[PASOPIA7/DISPLAY] draw the flopppy drive access led
[PV1000] rewrite with the common event manager class
[PV1000/JOYSTICK] fix $fc status (not complete)
[PV1000/VDP] add the patch for SPACE PANIC


2/1/2007

[COMMON] ignore some warnings on Visual Studio 2005
[WIN32/SCREEN] support video recording
[WIN32/SOUND] record wave as 16bit, stereo (for TMPGEnc)
[WIN32/SOUND] dont use multi threading to recieve MM_WOM_DONE event
[WIN32/WCE] build 4 binaries (use GAPI or GDI, DirectSound or waveOut)
[VM/BEEP] modify beep sound generator for more stable frequency
[VM/DATAREC] auto stop at the end of tape image
[VM/DEVICE] add virtual functions to get the memory wait and passed clocks in cpu class
[VM/EVENT] more precise event timing refering the passed clock in cpu class
[VM/I8253] drive counter when it reaches the terminal count or read the count registers
[VM/I8253] more precise output signal timing
[VM/NSC800] suppor NSC800
[VM/Z80] fix the clocks for opecodes DD-CB-** and FD-CB-**
[VM/Z80CTC] drive counter when it reaches the terminal count or read the count registers
[VM/Z80PIC] accept the interrupt request when it is running

[MULTI8/HD46505] dont use hsync event and use the event callback to drive the hsync signal 
[MZ2500/CRTC] dont use hsync event and use the event callback to drive the hsync signal 
[MZ2500/MEMORY] support the memory wait in display period
[MZ2500/Z80PIC] accept the interrupt request when it is running 
[MZ2500/Z80PIC] recognize the i8253 clock signal as level, or edge only for MUDER CLUB, KUGYOKUDEN and RELICS 
[PASOPIA] reimplement EmuPIA under the common source code project 
[PASOPIA7/HD46505] dont use hsync event and use the event callback to drive the hsync signal 


12/31/2006

[WIN32] support DirectShow video capture devices (DX8 or later is required)
[WIN32] support Windows CE.net 4.x devices (use GAPI and waveOut APIs)
[VM] each device can get the cpu time
[VM/BEEP] modify beep sound generator for more stable frequency
[VM/Z80] support BUSREQ
[VM/Z80PIC] call do_reti() in the device that requested the interrupt
[VM/Z80SIO] suppor Z80SIO
[VM/DISK] support TeleDisk floppy disk image
[VM/EVENT] fix the problem in the case that the new event is registered in the event callback routine
[VM/I8253] drive the counter more accurate and less power

[MZ2500] reimplement EmuZ-2500 under the common source code project
[MZ2500] support the ethernet card function designed by Mr.Oh!Ishi
[MZ2500/CRTC] support the super impose function
[MZ2500/MEMORY] support VRAM access wait 


12/7/2006

Initial release
